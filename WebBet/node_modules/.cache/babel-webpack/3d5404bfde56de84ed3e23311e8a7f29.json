{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/client-api.service\";\nimport * as i2 from \"src/app/services/main.service\";\nimport * as i3 from \"src/app/services/token.service\";\nimport * as i4 from \"src/app/services/share-data.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction MarqueeComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"a\", 3);\n    i0.ɵɵlistener(\"click\", function MarqueeComponent_div_3_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.openAnnouncementPopUp();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.news, \" \", ctx_r0.vnews ? \" | \" + ctx_r0.vnews : \"\", \" \");\n  }\n}\n\nexport let MarqueeComponent = /*#__PURE__*/(() => {\n  class MarqueeComponent {\n    constructor(userService, main, tokenService, shareService) {\n      this.userService = userService;\n      this.main = main;\n      this.tokenService = tokenService;\n      this.shareService = shareService;\n      this.news = \"\";\n      this.vnews = \"\";\n      this.siteName = environment.siteName;\n      this.newsPending = false;\n      this.newsPending2 = false;\n      this.isLogin = false;\n\n      if (this.tokenService.getToken()) {\n        this.isLogin = true;\n      }\n\n      if (this.isLogin) {\n        this.main.apis$.subscribe(res => {\n          this.getticker();\n          this.getNews();\n        });\n      }\n\n      this.intervalSub = setInterval(() => {\n        this.getticker();\n      }, 60000);\n    }\n\n    ngOnInit() {\n      this.getlanguages();\n    }\n\n    getlanguages() {\n      this.shareService._lagugageSub$.subscribe(data => {\n        if (data != null) {\n          this.Update = data;\n        } // console.log(this.Update);\n\n      });\n    }\n\n    loadMarquee() {\n      $('.marquee').marquee({\n        //speed in milliseconds of the marquee\n        duration: 18000,\n        //gap in pixels between the tickers\n        gap: 0,\n        //time in milliseconds before the marquee will start animating\n        delayBeforeStart: 0,\n        //'left' or 'right'\n        direction: 'left',\n        //true or false - should the marquee be duplicated to show an effect of continues flow\n        duplicated: false // startVisible: true\n\n      });\n    }\n\n    getNews() {\n      if (this.newsPending) {\n        return;\n      }\n\n      this.newsPending = true;\n      this.vnews = \"\";\n      this.userService.getTicker().subscribe(resp => {\n        if (resp.errorCode == 0) {\n          resp.result = resp.result.map(t => {\n            t.ticker = atob(t.ticker);\n            return t;\n          });\n          resp.result.forEach(element => {\n            this.vnews = this.vnews + \" | \" + element.ticker;\n          });\n        }\n\n        this.newsPending = false;\n      }, err => {\n        this.newsPending = false;\n      });\n    }\n\n    getticker() {\n      if (this.newsPending2) {\n        return;\n      }\n\n      this.newsPending2 = true;\n      this.userService.get_ticker().subscribe(resp => {\n        // this.news = this.news + \" \" + resp.ticker;\n        if (!this.news) {\n          setTimeout(() => {\n            this.loadMarquee();\n          });\n        }\n\n        this.news = resp.ticker;\n        this.newsPending2 = false;\n      }, err => {\n        this.newsPending2 = false;\n      });\n    }\n\n    openAnnouncementPopUp() {\n      window.open('#announcement', '_blank', \"toolbar=yes,scrollbars=yes,resizable=yes,top=0,left=0,width=850,height=650\");\n    }\n\n    ngOnDestroy() {\n      if (this.intervalSub) {\n        clearInterval(this.intervalSub);\n      }\n    }\n\n  }\n\n  MarqueeComponent.ɵfac = function MarqueeComponent_Factory(t) {\n    return new (t || MarqueeComponent)(i0.ɵɵdirectiveInject(i1.ClientApiService), i0.ɵɵdirectiveInject(i2.MainService), i0.ɵɵdirectiveInject(i3.TokenService), i0.ɵɵdirectiveInject(i4.ShareDataService));\n  };\n\n  MarqueeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MarqueeComponent,\n    selectors: [[\"app-marquee\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"marquee-box\"], [\"class\", \"marquee\", 4, \"ngIf\"], [1, \"marquee\"], [3, \"click\"]],\n    template: function MarqueeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h4\");\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, MarqueeComponent_div_3_Template, 3, 2, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.Update == null ? null : ctx.Update.News);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLogin);\n      }\n    },\n    directives: [i5.NgIf],\n    styles: [\"\"]\n  });\n  return MarqueeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}