{"ast":null,"code":"import { NavigationStart } from '@angular/router';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/main.service\";\nimport * as i2 from \"src/app/services/client-api.service\";\nimport * as i3 from \"src/app/services/sports-api.service\";\nimport * as i4 from \"src/app/services/data-formats.service\";\nimport * as i5 from \"src/app/services/share-data.service\";\nimport * as i6 from \"src/app/services/token.service\";\nimport * as i7 from \"src/app/services/score.service\";\nimport * as i8 from \"@angular/router\";\nimport * as i9 from \"../header/header.component\";\nimport * as i10 from \"@angular/common\";\nimport * as i11 from \"../col-center/col-center.component\";\nimport * as i12 from \"../col-left/col-left.component\";\nimport * as i13 from \"../col-right/col-right.component\";\n\nfunction FullWrapComponent_app_col_left_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-col-left\");\n  }\n}\n\nfunction FullWrapComponent_app_col_right_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-col-right\");\n  }\n}\n\nexport let FullWrapComponent = /*#__PURE__*/(() => {\n  class FullWrapComponent {\n    constructor(mainService, clientApi, sportsAPi, dfService, shareService, tokenService, scoreService, router) {\n      this.mainService = mainService;\n      this.clientApi = clientApi;\n      this.sportsAPi = sportsAPi;\n      this.dfService = dfService;\n      this.shareService = shareService;\n      this.tokenService = tokenService;\n      this.scoreService = scoreService;\n      this.router = router;\n      this.siteName = environment.siteName;\n      this.isLeftMenuShow = true;\n      this.isRightMenuShow = true;\n      this.allScoresData = [];\n      this.loader = true;\n      this.isBannerShow = false;\n      this.isLogin = false;\n      this.isGameApiCall = true;\n      this.isRemoveBfMarket = environment.isRemoveBfMarket;\n\n      if (this.tokenService.getToken()) {\n        this.isLogin = true;\n      }\n\n      this.mainService.apis$.subscribe(res => {\n        this.sportWise();\n        this.listCasinoTable();\n        this.GetBetStakeSetting();\n        this.intervalSub = setInterval(() => {\n          this.sportWise();\n        }, 60000);\n      });\n\n      if (this.router.url == '/dash' || this.router.url.indexOf('/tpp') > -1 || this.router.url.indexOf('/aman') > -1 || this.router.url.indexOf('/lcasino') > -1 || this.router.url.indexOf('/Other-Games') > -1 || this.router.url.indexOf('/feedback') > -1 || this.router.url.indexOf('/dispute') > -1 || this.router.url.indexOf('/betgames') > -1 || this.router.url.indexOf('/twain') > -1) {\n        this.isLeftMenuShow = false;\n        this.isRightMenuShow = false;\n      } else if (this.router.url == '/running') {\n        this.isLeftMenuShow = false;\n        this.isRightMenuShow = true;\n      } else {\n        this.isLeftMenuShow = true;\n        this.isRightMenuShow = true;\n      }\n\n      this.router.events.subscribe(event => {\n        window.scrollTo(0, 0);\n        setTimeout(() => {\n          $('#overWrap').scrollTop(0);\n        }, 100);\n\n        if (event instanceof NavigationStart) {\n          // console.log(event.url)\n          if (event.url == '/dash' || event.url.indexOf('/tpp') > -1 || event.url.indexOf('/aman') > -1 || event.url.indexOf('/lcasino') > -1 || event.url.indexOf('/Other-Games') > -1 || event.url.indexOf('/feedback') > -1 || event.url.indexOf('/dispute') > -1 || event.url.indexOf('/betgames') > -1 || event.url.indexOf('/twain') > -1) {\n            this.isLeftMenuShow = false;\n            this.isRightMenuShow = false;\n          } else if (event.url == '/running') {\n            this.isLeftMenuShow = false;\n            this.isRightMenuShow = true;\n          } else {\n            this.isLeftMenuShow = true;\n            this.isRightMenuShow = true;\n          }\n        }\n      });\n    }\n\n    ngOnInit() {}\n\n    GetBetStakeSetting() {\n      let accountInfo = this.tokenService.getUserInfo();\n\n      if (!accountInfo) {\n        this.stakeSettingData = [100, 500, 1000, 2000, 5000, 10000, 20000, 50000, 100, 500, 1000, 5000];\n        this.shareService.shareStakeButton(this.stakeSettingData);\n        this.getpprofile();\n        return;\n      }\n\n      if (accountInfo.stakeSetting) {\n        this.stakeSettingData = accountInfo.stakeSetting.split(',');\n\n        if (this.stakeSettingData.length == 10) {\n          this.stakeSettingData.push('1000');\n          this.stakeSettingData.push('5000');\n        }\n      } else {\n        if (this.siteName == \"jeetfair\") {\n          this.stakeSettingData = [5, 10, 50, 100, 500, 1000, 5000, 10000, 5, 10, 50, 100];\n        } else {\n          this.stakeSettingData = [100, 500, 1000, 2000, 5000, 10000, 20000, 50000, 100, 500, 1000, 5000];\n        }\n      }\n\n      this.stakeSettingData.forEach((element, index) => {\n        this.stakeSettingData[index] = parseInt(element);\n      });\n      this.shareService.shareStakeButton(this.stakeSettingData);\n    }\n\n    getpprofile() {\n      if (!this.isLogin) {\n        return;\n      }\n\n      this.clientApi.profile().subscribe(resp => {\n        if (resp.result) {\n          if (this.siteName == \"betfair21\" || this.siteName == \"betswiz\") {\n            resp.result[0]['currencyCode'] = \"\";\n          }\n\n          this.tokenService.setUserInfo(resp.result[0]);\n          window.location.href = window.location.origin + window.location.pathname;\n        }\n      });\n    }\n\n    listCasinoTable() {\n      if (!this.isLogin) {\n        return;\n      }\n\n      this.clientApi.listCasinoTable().subscribe(resp => {\n        console.log(resp);\n\n        if (resp.result) {\n          this.shareService.shareCasinoList(resp.result[0].tables);\n        }\n      });\n    }\n\n    sportWise() {\n      if (!this.isGameApiCall) {\n        return;\n      }\n\n      this.isGameApiCall = false;\n      this.clientApi.listGames().subscribe(resp => {\n        if (resp.result) {\n          if (resp.result) {\n            resp.result.forEach(item => {\n              if (item.eventId == 31345701) {\n                item.markets.push({\n                  betDelay: 0,\n                  gameId: 430719080,\n                  isInPlay: 1,\n                  marketId: '1.145970106',\n                  marketName: 'Winner 2022',\n                  open: 1,\n                  status: 1\n                });\n              }\n\n              if (item.markets[0]) {\n                item['marketId'] = item.markets[0].marketId;\n              }\n\n              if (item.sportsName == \"Virtual Cricket\") {\n                item.sportsName = \"cricket\";\n                item.sportId = \"4\";\n                item.eventTypeId = \"4\";\n                item['isVirtual'] = true;\n                item['isBm'] = true;\n              }\n\n              if (item.sportsName == \"Kabaddi\") {\n                item.competitionName = \"Pro Kabaddi 2021-22\";\n                item['isKabaddi'] = true;\n                item['isBm'] = true; // item['isFancy'] = true;\n              }\n\n              if (item.sportsName == \"Election\") {\n                item['isKabaddi'] = true; // item['isBm'] = true;\n\n                item['isFancy'] = true;\n                item['marketName'] = \"Assembly Election 2022\";\n              } // new field start\n\n\n              if (this.isRemoveBfMarket) {\n                if (item.matchOddsInplay1 == 0) {\n                  item.matchOddsInplay1 = true;\n                } else {\n                  item.matchOddsInplay1 = false;\n                }\n\n                if (item.tiedMatchInplay1 == 0) {\n                  item.tiedMatchInplay1 = true;\n\n                  if (item.markets[0]) {\n                    item.markets = item.markets.filter(function (market) {\n                      return market.marketName != \"Tied Match\";\n                    });\n                  }\n                } else {\n                  item.tiedMatchInplay1 = false;\n                }\n\n                if (item.overUnderInplay1 == 0 || item.winTheTossInplay1 == 0) {\n                  item.overUnderInplay1 = true;\n\n                  if (item.markets[0]) {\n                    item.markets = item.markets.filter(function (market) {\n                      return !market.marketName.includes(\"Over/Under\");\n                    });\n                  }\n                } else {\n                  item.overUnderInplay1 = false;\n                } // new field end\n\n              }\n\n              if (item.matchOddsInplay == 0) {\n                item.matchOddsInplay = true;\n              } else {\n                item.matchOddsInplay = false;\n              }\n\n              if (item.tiedMatchInplay == 0) {\n                item.tiedMatchInplay = true; // if (item.markets[0]) {\n                //   item.markets = item.markets.filter(function (market) {\n                //     return market.marketName != \"Tied Match\";\n                //   });\n                // }\n              } else {\n                item.tiedMatchInplay = false;\n              }\n\n              if (item.overUnderInplay == 0) {\n                item.overUnderInplay = true; // if (item.markets[0]) {\n                //   item.markets = item.markets.filter(function (market) {\n                //     return !market.marketName.includes(\"Over/Under\");\n                //   });\n                // }\n              } else {\n                item.overUnderInplay = false;\n              }\n\n              if (item.eventName.indexOf(' SRL ') > -1) {\n                item['isSrl'] = true;\n              }\n\n              if (item.markets[0] && this.siteName == 'lionbook247' || this.siteName == 'cricbuzzercom') {\n                item.markets = item.markets.filter(function (market) {\n                  return market.marketName != \"Tied Match\";\n                });\n              }\n\n              if (item.eventName.indexOf(' T10 v ') > -1) {\n                item.competitionId = \"505540854\";\n                item.competitionName = \"T10 Virtual Cricket League\";\n                item['isStream'] = true;\n              }\n\n              if (item.markets[0]) {\n                item.markets = item.markets.filter(function (market) {\n                  return market.marketName != \"Over/Under 3.5 Goals\";\n                });\n              }\n            });\n          } // if (this.siteName != 'cricbuzzer') { //Remove new all sport\n          //   resp.result = resp.result.filter(item => {\n          //     return parseInt(item.eventTypeId) < 100 && parseInt(item.eventTypeId) != 6;\n          //   });\n          // }\n          // console.log(resp.result);\n\n\n          if (this.siteName == 'lionbook247') {\n            // remove SRL matches\n            resp.result = resp.result.filter(item => {\n              return item.eventName.indexOf(' SRL ') == -1;\n            });\n          }\n\n          if (this.siteName == 'lionbook247') {\n            resp.result = resp.result.filter(item => {\n              return item.eventName.indexOf(' T10 v ') == -1;\n            });\n          }\n\n          resp.result = resp.result.filter(item => {\n            return parseInt(item.eventTypeId) == 4 || parseInt(item.eventTypeId) == 1 || parseInt(item.eventTypeId) == 2 || parseInt(item.eventTypeId) == 52 || parseInt(item.eventTypeId) == 85;\n          });\n          this.shareService.shareListGamesData(resp.result); // console.log(resp.result,\"fullwrap sharelist games data\")\n\n          this.getMatchOdds(resp.result);\n        }\n\n        if (resp.sports) {\n          this.shareService.sharegamestatus(resp.sports);\n        }\n\n        this.isGameApiCall = true;\n      }, err => {\n        this.isGameApiCall = true;\n      });\n    }\n\n    getMatchOdds(matches) {\n      var ids = [];\n      var allSportIds = []; // console.log(matches,\"full wrap\")\n\n      matches.forEach((match, index) => {\n        var _a, _b;\n\n        if (!match.markets[0]) {\n          return;\n        }\n\n        if ((match.eventTypeId == 4 || match.eventTypeId == 1 || match.eventTypeId == 2) && ((_a = match.markets[0]) === null || _a === void 0 ? void 0 : _a.marketId.length) < 13) {\n          if (match.markets[0].marketName == 'Match Odds' || match.markets[0].marketName == 'Moneyline' || match.markets[0].marketName == 'Fight Result' || match.markets[0].marketName == 'Fight Result - Unmanaged') {\n            ids.push(match.markets[0].marketId);\n          }\n        } else if (((_b = match.markets[0]) === null || _b === void 0 ? void 0 : _b.marketId.length) < 13) {\n          // if (match.markets[0].marketName == 'Match Odds' || match.markets[0].marketName == 'Moneyline' || match.markets[0].marketName == 'Fight Result' || match.markets[0].marketName == 'Fight Result - Unmanaged') {\n          allSportIds.push(match.markets[0].marketId); // }\n        }\n      });\n\n      if (ids.length) {\n        this.sportsAPi.getMatchOdds(4, ids.join(','), false).subscribe(resp => {\n          // console.log(resp)\n          if (resp.errorCode) {\n            this.shareService.shareSportData(this.dfService.getSportDataFormat(matches));\n          } else {\n            matches.forEach(match => {\n              resp.forEach(market => {\n                if (match.eventId == market.eventId) {\n                  match['runners'] = market.runners;\n                  match['status'] = market.status;\n                }\n              });\n\n              if (this.allScoresData.length > 0) {\n                this.allScoresData.forEach(scoreData => {\n                  if (match.eventId == scoreData.eventId) {\n                    match['score'] = scoreData;\n                  }\n                });\n              }\n            });\n          }\n\n          this.shareService.shareSportData(this.dfService.getSportDataFormat(matches));\n          this.loader = false;\n          this.getAllScores(matches);\n        }, err => {\n          this.shareService.shareSportData(this.dfService.getSportDataFormat(matches));\n        });\n      }\n\n      if (allSportIds.length) {\n        this.sportsAPi.getMatchOdds(4, allSportIds.join(','), true).subscribe(resp => {\n          // console.log(resp)\n          if (resp.errorCode) {\n            this.shareService.shareSportData(this.dfService.getSportDataFormat(matches));\n          } else {\n            matches.forEach(match => {\n              resp.forEach(market => {\n                if (match.eventId == market.eventId) {\n                  match['runners'] = market.runners;\n                  match['status'] = market.status;\n                }\n              });\n\n              if (this.allScoresData.length > 0) {\n                this.allScoresData.forEach(scoreData => {\n                  if (match.eventId == scoreData.eventId) {\n                    match['score'] = scoreData;\n                  }\n                });\n              }\n            });\n          }\n\n          this.shareService.shareSportData(this.dfService.getSportDataFormat(matches));\n          this.loader = false;\n          this.getAllScores(matches);\n        }, err => {\n          this.shareService.shareSportData(this.dfService.getSportDataFormat(matches));\n        });\n      } // console.log(allSportIds)\n\n    }\n\n    getAllScores(matches) {\n      if (matches.length > 0) {\n        this.scoreService.getAllScore().subscribe(resp => {\n          // console.log(resp)\n          this.allScoresData = resp;\n          matches.forEach(match => {\n            if (resp.length > 0) {\n              resp.forEach(scoreData => {\n                if (match.eventId == scoreData.eventId) {\n                  match['score'] = scoreData;\n                }\n              });\n            }\n          });\n          this.shareService.shareSportData(this.dfService.getSportDataFormat(matches));\n        });\n      }\n    }\n\n    ngOnDestroy() {\n      if (this.intervalSub) {\n        clearInterval(this.intervalSub);\n      }\n    }\n\n  }\n\n  FullWrapComponent.ɵfac = function FullWrapComponent_Factory(t) {\n    return new (t || FullWrapComponent)(i0.ɵɵdirectiveInject(i1.MainService), i0.ɵɵdirectiveInject(i2.ClientApiService), i0.ɵɵdirectiveInject(i3.SportsApiService), i0.ɵɵdirectiveInject(i4.DataFormatsService), i0.ɵɵdirectiveInject(i5.ShareDataService), i0.ɵɵdirectiveInject(i6.TokenService), i0.ɵɵdirectiveInject(i7.ScoreService), i0.ɵɵdirectiveInject(i8.Router));\n  };\n\n  FullWrapComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FullWrapComponent,\n    selectors: [[\"app-full-wrap\"]],\n    decls: 5,\n    vars: 2,\n    consts: [[1, \"full-wrap\"], [4, \"ngIf\"]],\n    template: function FullWrapComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵtemplate(2, FullWrapComponent_app_col_left_2_Template, 1, 0, \"app-col-left\", 1);\n        i0.ɵɵelement(3, \"app-col-center\");\n        i0.ɵɵtemplate(4, FullWrapComponent_app_col_right_4_Template, 1, 0, \"app-col-right\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLeftMenuShow);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isRightMenuShow);\n      }\n    },\n    directives: [i9.HeaderComponent, i10.NgIf, i11.ColCenterComponent, i12.ColLeftComponent, i13.ColRightComponent],\n    styles: [\".tp_image[_ngcontent-%COMP%]{height:auto}.entrance-title[_ngcontent-%COMP%]{background-image:linear-gradient(270deg,rgba(41,42,42,.62) 4%,#000 97%)}.casino.entrance-half[_ngcontent-%COMP%]:before{padding-top:65.17778%}#coming_soon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}#coming_soon[_ngcontent-%COMP%]   .news-wrap.news-wrap-frame[_ngcontent-%COMP%]{height:auto}#Evolution[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.overlay[_ngcontent-%COMP%]   .frame-wrap[_ngcontent-%COMP%]{width:89.33333vw;height:90%}#Evolution[_ngcontent-%COMP%]   .news-wrap.news-wrap-frame[_ngcontent-%COMP%]{height:auto}.news-wrap.news-wrap-frame[_ngcontent-%COMP%]{position:relative;width:39%;height:100%;margin-left:37%}.news-wrap[_ngcontent-%COMP%]{position:relative;flex-direction:column;width:89.33333vw;height:90%;border-radius:1.33333vw;background:#fff}.side-content[_ngcontent-%COMP%]{flex:1;border-radius:0 0 1.6vw}.news-wrap[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{position:relative;border-radius:0 0 1.33333vw 1.33333vw}.btn-send[_ngcontent-%COMP%]{margin:0}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);z-index:53}\"]\n  });\n  return FullWrapComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}