<h2>Parlay Bets</h2>
<ul class="tab col3">
    <li><a routerLink="/parlay_bet_history">Parlay Bets History</a></li>

    <li><a class="select" routerLink="/parlay_profit_loss">Parlay Profit &amp; Loss</a></li>

</ul>
<ul class="report-tab-wrap" style="display: block;">
    <li id="reportType_exchange" class="report-tab select"> ALL </li>
</ul>
<div class="function-wrap">
    <ul class="input-list">
        <li><label>Period</label></li>
        <li>
            <input id="startDate" class="cal-input" type="text" placeholder="YYYY-MM-DD" bsDatepicker
                [(ngModel)]="selectfromdate" [minDate]="month" [maxDate]="selectfromdate"
                [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-default', isAnimated: true ,showWeekNumbers: false}">
            <input id="startTime" disabled="" class="time-input disable" type="text" placeholder="00:00" maxlength="5">
            to
            <input id="endDate" class="cal-input" type="text" placeholder="YYYY-MM-DD" bsDatepicker
                [(ngModel)]="selecttodate" [minDate]="month" [maxDate]="selecttodate"
                [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass: 'theme-default', isAnimated: true ,showWeekNumbers: false}">
            <input id="endTime" disabled="" class="time-input disable" type="text" placeholder="23:59" maxlength="5">
        </li>
        <li style="display: none;">(TimeZone:IST)</li>
    </ul>
    <ul class="input-list">
        <li><a id="today" (click)="selectTab('today')" class="btn">Just For Today</a></li>
        <li><a id="yesterday" (click)="selectTab('yesterday')" class="btn">From Yesterday</a></li>
        <li style="display: none;"><a id="last7days" (click)="selectTab('last7days')" class="btn">Last 7 days</a>
        </li>
        <li style="display: none;"><a id="last30days" (click)="selectTab('last30days')" class="btn">Last 30 days</a>
        </li>
        <li style="display: none;"><a id="last2months" (click)="selectTab('last2months')" class="btn">Last 2
                Months</a></li>
        <li style="display: none;"><a id="last3months" (click)="selectTab('last3months')" class="btn">Last 3
                Months</a></li>
        <li><a id="getPL" class="btn-send" (click)="GetProfitLoss()">Get P &amp; L</a></li>
    </ul>
</div>
<div id="report" *ngIf="ProfitLoss.length>0">
    <ul id="spotsUl" class="total-show">
        <li id="totalPL">Total P/L: {{userInfo?.currencyCode}} <span
                [ngClass]="{'win':totalPnl>0,'lose':totalPnl<0}">{{totalPnl | number:'1.2-2'}}</span></li>

    </ul>
    <ul id="binaryPL" class="total-show" style="display: none;">
        <li id="binaryTotalPL"></li>
    </ul>
    <table id="reportTable" class="table01 table-pnl" style="display: table;">
        <tbody>
            <tr>
                <th width="" class="align-L">BetId </th>
                <th width="15%">Start Time </th>
                <th width="15%">Settled date </th>
                <th width="15%">Status </th>
                <th width="18%">Profit/Loss </th>
            </tr>
            <ng-container *ngFor="let pnl of ProfitLoss;let index=index">
                <tr id="summary{{index}}" style="display: table-row;">
                    <td id="title" class="align-L">{{pnl.betId}}
                        <img class="fromto" src="assets/images/transparent.gif"><span class="count">{{pnl.countName}}</span>
                    </td>
                    <td id="startTime">{{pnl.betTime | date: 'yyyy-MM-dd HH:mm:ss'}}</td>
                    <td id="settledDate">{{pnl.settledDate | date: 'yyyy-MM-dd HH:mm:ss'}}</td>
                    <td id="settledDate" [ngClass]="{'win':pnl.result=='WON','lose':pnl.result=='LOST'}">{{pnl.result}}</td>
                    <td>
                        <a id="pl0"
                            [ngClass]="{'expand-open':srNo==index,'expand-close':srNo!=index,'win':pnl.netPL>0,'lose':pnl.netPL<0}"
                            (click)="srNo==index?toggleDetail(null):toggleDetail(index)"
                            href="javascript: void(0);">{{pnl.netPL | number:'1.2-2'}}</a>
                    </td>
                </tr>
                <tr id="detail{{index}}" class="expand" style="display: table-row;" *ngIf="srNo==index">
                    <td colspan="6">
                        <img class="expand-arrow-R" src="assets/images/transparent.gif">

                        <table class="table-commission">
                            <tbody>
                                <tr>
                                    <th width="10%" class="align-L">SportsName
                                    </th>
                                    <!-- <th width="20%"class="align-C">EventName
                                    </th>
                                    <th width="14%" class="align-C">MarketName
                                    </th> -->

                                    <th width="14%" class="align-C">Selection
                                    </th>
                                    <th width="10%">Odds
                                    </th>
                                    <th width="10%">Result
                                    </th>
                                </tr>
                                <ng-container
                                    *ngFor="let bet of pnl.bets;let index2=index;let isOdd=odd;let isEven=even">
                                    <tr id="txRow{{index2}}" style="display: table-row;"
                                        [ngClass]="{'odd':isOdd,'even':isEven}">
                                        <td style="white-space: nowrap;text-transform: capitalize;" id="matchTitle" class="align-L">{{bet.sport }}
                                            <img class="fromto" src="assets/images/transparent.gif">
                                            <strong>{{bet.eventName}}</strong>
                                            <img class="fromto" src="assets/images/transparent.gif"><br>{{bet.betType=='yes'
                                            || bet.betType=='no'?'Fancy
                                            Bet':bet.marketName}}
                                        </td>

                                        <td id="matchSelection" class="align-C">{{bet.selName}}</td>
                                        <td id="txOddsMatched">{{bet.odds}}</td>
                                        <td id="placed" [ngClass]="{'win':bet.result=='WON','lose':bet.result=='LOST'}">
                                            {{bet.result}}</td>
                                    </tr>
                                </ng-container>
                                <tr class="sum-pl" *ngIf="!pnl.betId.includes('PAR')">
                                    <td colspan="7">

                                        <dl>


                                            <dt id="commissionTitle">{{Update?.commission}}</dt>
                                            <dd id="commission" style="color: red;">{{pnl.commission | number:'1.2-2'}}
                                            </dd>

                                            <dt class="net_total">{{Update?.netmarkettotal}}</dt>
                                            <dd id="netTotal" class="net_total"
                                                [ngClass]="{'win':pnl.netPL>0,'lose':pnl.netPL<0}">{{pnl.netPL |
                                                number:'1.2-2'}}</dd>
                                        </dl>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                    </td>
                </tr>
            </ng-container>

        </tbody>
    </table>
</div>

<div id="noReportMessage" *ngIf="ProfitLoss.length==0 && !loader">
    <p>Betting History enables you to review the bets you have placed. <br>Specify the time period during which your
        bets were placed, the type of markets on
        which the bets were placed, and the sport.</p>
    <p>Betting History is available online for the past 30 days.</p>
</div>