"use strict";(self.webpackChunkskyexch_mobile=self.webpackChunkskyexch_mobile||[]).push([[110],{97110:function(e,r,t){t.r(r),t.d(r,{ChangePasswordModule:function(){return q}});var s=t(38583),n=t(50906),o=t(91841),i=t(3679);function d(e,r){return t=>{const s=t.controls[r];s.errors&&!s.errors.mustMatch||s.setErrors(t.controls[e].value!==s.value?{mustMatch:!0}:null)}}const a=function(e){let r=e.value||"";return r?!1===/[A-Z]+/g.test(r)?{passwordStrength:"The password must contain at least: 1 uppercase letter"}:!1===/[a-z]+/g.test(r)?{passwordStrength:"The password must contain at least: 1 lowercase letter"}:!1===/[0-9]+/g.test(r)?{passwordStrength:"The password must contain at least: 1 number"}:r.length<8?{passwordStrength:"The password must contain at least: 8 characters"}:null:null};var u=t(92340),w=t(37716),h=t(54120),c=t(563),g=t(76478);function p(e,r){1&e&&(w.ynx(0),w._uU(1," Password is required "),w.BQk())}function l(e,r){if(1&e&&(w.TgZ(0,"span"),w._uU(1),w.qZA()),2&e){const e=w.oxw(2);w.xp6(1),w.hij(" ",e.ChangePwdForm.get("newpwd").errors.passwordStrength,"")}}function f(e,r){if(1&e&&(w.ynx(0),w.YNc(1,l,2,1,"span",11),w.BQk()),2&e){const e=w.oxw();w.xp6(1),w.Q6J("ngIf",e.ChangePwdForm.get("newpwd").hasError("passwordStrength"))}}function m(e,r){1&e&&(w.ynx(0),w._uU(1," Confirm Password is required "),w.BQk())}function P(e,r){1&e&&(w.ynx(0),w._uU(1,"New Password and retype Password should be same ! "),w.BQk())}function C(e,r){1&e&&(w.ynx(0),w._uU(1," Old Password is required "),w.BQk())}function Z(e,r){if(1&e&&(w.ynx(0),w._uU(1),w.BQk()),2&e){const e=w.oxw();w.xp6(1),w.hij(" ",e.result," ")}}const y=[{path:"",component:(()=>{class e{constructor(e,r,t,s,n){this.loginServie=e,this.tokenService=r,this.toastr=t,this.router=s,this.fb=n,this.submitted=!1,this.isLogin=!1,this.isChangePassword=!1,this.AferLoginChangePassword=u.N.AferLoginChangePassword,this.tokenService.getToken()&&(this.isLogin=!0)}ngOnInit(){this.initChangePwdForm(),this.getProfile()}getProfile(){if(!this.isLogin)return;let e=this.tokenService.getUserInfo();e&&1==e.newUser&&this.AferLoginChangePassword&&$("#changePassBox").fadeIn()}initChangePwdForm(){this.ChangePwdForm=this.fb.group({pwd:["",i.kI.required],newpwd:["",[i.kI.required,a]],retypepwd:["",i.kI.required],context:["Web"]},{validator:d("newpwd","retypepwd")})}get f(){return this.ChangePwdForm.controls}get pwd(){return this.ChangePwdForm.get("pwd")}get newpwd(){return this.ChangePwdForm.get("newpwd")}get retypepwd(){return this.ChangePwdForm.get("retypepwd")}ChangePwd(){this.submitted=!0,this.ChangePwdForm.valid&&(this.isChangePassword||(this.isChangePassword=!0,this.loginServie.changePassword(this.ChangePwdForm.value).subscribe(e=>{if(0==e.errorCode){this.toastr.successMsg("Password updated successfull"),this.toastr.successMsg(e.errorDescription),this.result="Password updated successfull",this.resetFrom(),this.submitted=!1;let r=this.tokenService.getUserInfo();r&&(r.newUser=0,this.tokenService.setUserInfo(r)),this.router.navigate(["dash"]),this.isChangePassword=!1}else this.toastr.errorMsg(e.errorDescription),this.result=e.errorDescription,this.submitted=!1,this.isChangePassword=!1})))}resetFrom(){this.initChangePwdForm()}}return e.\u0275fac=function(r){return new(r||e)(w.Y36(h.r),w.Y36(c.Br),w.Y36(g.D),w.Y36(n.F0),w.Y36(i.qu))},e.\u0275cmp=w.Xpm({type:e,selectors:[["app-change-password"]],decls:26,vars:7,consts:[[1,"pass-head"],[1,"pass-wrap"],[1,"form-login"],["name","passwordPinForm",3,"formGroup","ngSubmit"],[2,"color","#000"],["id","newPwd","type","password","placeholder","New Password","formControlName","newpwd"],["id","confirmPwd","type","password","placeholder","New Password Confirm","formControlName","retypepwd"],["id","currentPwd","type","password","placeholder","Old Password","formControlName","pwd"],["id","submit",1,"btn-send",3,"click"],["type","submit",2,"display","none"],[1,"txt-wrap"],[4,"ngIf"]],template:function(e,r){1&e&&(w.TgZ(0,"header",0),w._UZ(1,"h1"),w.qZA(),w.TgZ(2,"div",1),w.TgZ(3,"dl",2),w.TgZ(4,"form",3),w.NdJ("ngSubmit",function(){return r.ChangePwd()}),w.TgZ(5,"dt",4),w._uU(6,"Change Password"),w.qZA(),w.TgZ(7,"dd"),w._UZ(8,"input",5),w.qZA(),w.TgZ(9,"dd"),w._UZ(10,"input",6),w.qZA(),w.TgZ(11,"dd"),w._UZ(12,"input",7),w.qZA(),w.TgZ(13,"dd"),w.TgZ(14,"a",8),w.NdJ("click",function(){return r.ChangePwdForm.invalid?"":r.ChangePwd()}),w._uU(15,"Change"),w.qZA(),w._UZ(16,"button",9),w.qZA(),w.qZA(),w.qZA(),w.TgZ(17,"div",10),w.TgZ(18,"ul"),w.TgZ(19,"li"),w.YNc(20,p,2,0,"ng-container",11),w.YNc(21,f,2,1,"ng-container",11),w.YNc(22,m,2,0,"ng-container",11),w.YNc(23,P,2,0,"ng-container",11),w.YNc(24,C,2,0,"ng-container",11),w.YNc(25,Z,2,1,"ng-container",11),w.qZA(),w.qZA(),w.qZA(),w.qZA()),2&e&&(w.xp6(4),w.Q6J("formGroup",r.ChangePwdForm),w.xp6(16),w.Q6J("ngIf",(null==r.newpwd.errors?null:r.newpwd.errors.required)&&r.f.newpwd.touched),w.xp6(1),w.Q6J("ngIf",r.f.newpwd.errors),w.xp6(1),w.Q6J("ngIf",(null==r.retypepwd.errors?null:r.retypepwd.errors.required)&&r.f.retypepwd.touched),w.xp6(1),w.Q6J("ngIf",null==r.retypepwd.errors?null:r.retypepwd.errors.mustMatch),w.xp6(1),w.Q6J("ngIf",(null==r.pwd.errors?null:r.pwd.errors.required)&&r.f.pwd.touched),w.xp6(1),w.Q6J("ngIf",r.result))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,s.O5],styles:[".form-login[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{color:#fff}"]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=w.oAB({type:e}),e.\u0275inj=w.cJS({imports:[[s.ez,n.Bz.forChild(y),o.JF,i.u5,i.UX],n.Bz]}),e})()}}]);